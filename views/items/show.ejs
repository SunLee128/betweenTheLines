<%- include ('../partials/header.ejs') %>
<div class="container">
  <div class="row">
    <!-- <div class="col-md-3">
      <p class="lead">Insights on <%= item.item_name%> </p>
      <div class="list-group">
          <li class="list-group-item active">Info 1</li>
          <li class="list-group-item">Info 2</li>
          <li class="list-group-item">Info 3</li>
      </div>
    </div> -->
    <div class="col-md-9">
      <div class="thumbnail">
          <img class="img-responsive" style="height:250px; display: block;
          margin: 0 auto;" src="<%= item.image_url %>">
          <div class="caption-full">
            <h4><a><%= item.item_name%></a></h4>
            <p class="lead" class="text-muted"><%= item.description%></p>
            <div class="d-flex justify-content-between align-items-center">
              <div class="btn-group">
                <a class="btn btn-xs btn-outline-secondary" href="/items/<%= item._id %>/edit">Edit</a>
                <form id="delete-form" action="/items/<%= item._id %>?_method=DELETE" method="POST">
                  <button class="btn btn-xs btn-outline-secondary">Delete</button>
                </form>
              </div>
              <div class="text-right">
                  <a class="btn btn-success" href="/items/<%= item._id %>/reviews/new">Add new review</a>
              </div>
            </div>
          </div>
      </div>
      <div class="well">
        <hr>
        <% item.reviews.forEach(function(review){ %>
          <div class="row">
            <div class="col-12" >

              <div class="card">
                <div class="card-header" style="display: flex;">
                  <strong><%= review.user_name %></strong>
                </div>
                <div class="card-body">
                  <p> <%= review.text %></p>
                  <span>sentiment:</span><strong><%= review.results.sentiment %></strong>
                  <div class="row">
                    <div class="col-3">
                      <p>positive: <%= Math.floor(review.results.positive  * 10000) / 10000 %></p>
                    </div>
                    <div class="col-3">
                      <p>neutral: <%= Math.floor(review.results.neutral  * 10000) / 10000 %></p>
                    </div>
                    <div class="col-3">
                      <p>negative: <%= Math.floor(review.results.negative  * 10000) / 10000 %></p>
                    </div>
                    <div class="col-3">
                      <form id="delete-form" action="/items/<%=item._id %>/reviews/<%=review._id %>?_method=DELETE" method="POST">
                        <input type="submit" class="btn btn-xs btn-outline-secondary" value="Delete">
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</div>
<%- include ('../partials/footer.ejs') %> 
